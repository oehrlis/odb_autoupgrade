# Release v0.3.0 - Development Workflow Enhancement

**Release Date:** 2026-01-12  
**Type:** Minor Release (Features & Improvements)

## Overview

Major development workflow enhancement release that synchronizes odb_autoupgrade
with the oradba_extension template v0.3.0. This release introduces a comprehensive
Makefile with color-coded output, extensive help system, and improved CI/CD
integration. The release focuses on enhancing developer experience and workflow
automation.

## Major Changes

### Comprehensive Makefile Enhancement

The Makefile has been completely redesigned with:

**Color-coded output** for better readability:

- Green: Success messages
- Blue: Action notifications
- Red: Error messages
- Yellow: Warnings and hints

**Extensive help system** with categorized targets:

- Development: `test`, `lint`, `format`, `check`
- Build & Distribution: `build`, `clean`, `clean-all`
- Version & Git: `version-bump-*`, `tag`, `status`
- CI/CD & Tools: `ci`, `pre-commit`, `tools`, `info`
- Quick Shortcuts: `t`, `l`, `f`, `b`, `c`

**Example help output:**

```bash
$ make help
OraDBA AutoUpgrade Development Makefile
Version: 0.3.0

Usage:
  make <target>

Development:
  test                   Run BATS tests
  lint                   Run all linters
  format                 Format all code
  ...
```

### New Development Targets

Added comprehensive development workflow targets:

**format** - Code formatting with shfmt:

```bash
make format              # Format all shell scripts
make format-check        # Check formatting without changes
```

**check** - Combined format check and lint:

```bash
make check              # Verify code quality
```

**ci** - Full CI pipeline locally:

```bash
make ci                 # clean → lint → test → build
```

**pre-commit** - Pre-commit checks:

```bash
make pre-commit         # format → lint → test
```

### Version Management Targets

Automated version bumping with validation:

```bash
make version-bump-patch  # 0.2.0 → 0.2.1
make version-bump-minor  # 0.2.0 → 0.3.0
make version-bump-major  # 0.2.0 → 1.0.0
make tag                 # Create git tag from VERSION
```

### Development Tools Support

**tools** - Display status of all development tools:

```bash
$ make tools
Development Tools Status

Tool                 Status
----                 ------
shellcheck          ✓ installed
shfmt               ✓ installed
markdownlint        ✓ installed
bats                ✓ installed
git                 ✓ installed
```

**info** - Show comprehensive project information:

```bash
$ make info
OraDBA AutoUpgrade Extension Information

Extension:   odb_autoupgrade
Version:     0.3.0
Dist dir:    dist

Directories:
  bin:         4 files
  etc:         15 files
  doc:         5 files
  ...
```

**status** - Display git status and current version:

```bash
$ make status
Project Status
Extension: odb_autoupgrade
Version: 0.3.0

## master
```

### Quick Shortcuts

Added convenient single-letter shortcuts:

```bash
make t              # Shortcut for test
make l              # Shortcut for lint
make f              # Shortcut for format
make b              # Shortcut for build
make c              # Shortcut for clean
```

### CI/CD Improvements

**Updated GitHub Actions workflows** to use Makefile targets:

**CI workflow (.github/workflows/ci.yml)**:

- Uses `make lint-shell` and `make lint-markdown` for consistency
- Centralized linting logic in Makefile

**Release workflow (.github/workflows/release.yml)**:

- Simplified to use `make ci` for all checks and build
- Single source of truth for CI/CD logic
- Better maintainability

**Benefits:**

- Run CI pipeline locally: `make ci`
- Identical behavior in CI and local development
- Easier to debug CI failures

### Documentation Enhancements

**README.md improvements:**

- Enhanced Integrity Checking section with more details
- Added "Common use cases" description for `.checksumignore` patterns
- Clarified OraDBA integrity verification process
- Better formatting consistency throughout documentation

**Example additions:**

```markdown
## Integrity Checking

The extension includes checksum verification:
- Files checksums stored in .extension
- Excludes: credentials, caches, temporary files
- Customizable via .checksumignore
```

## New Features

### make clean-all

Deep clean including caches and temporary files:

```bash
make clean-all       # Remove dist/, test artifacts, caches
```

Cleans:

- `dist/` directory
- Test artifacts
- Build caches
- Temporary files

### Improved Error Messages

Better error messages with installation guidance:

```bash
$ make lint
Error: shellcheck not found. Install with: brew install shellcheck
```

Tool-specific installation instructions for macOS and Linux.

### Consistent Formatting

All Makefile targets now follow consistent formatting:

- Indentation standardized
- Color-coded output
- Clear success/failure indicators
- Comprehensive error handling

## Technical Details

### Makefile Structure

```makefile
# Color output definitions
COLOR_RESET  := \033[0m
COLOR_GREEN  := \033[32m
COLOR_YELLOW := \033[33m
COLOR_BLUE   := \033[34m
COLOR_RED    := \033[31m

# Tool detection
SHELLCHECK   := $(shell command -v shellcheck 2>/dev/null)
SHFMT        := $(shell command -v shfmt 2>/dev/null)
MARKDOWNLINT := $(shell command -v markdownlint 2>/dev/null)
BATS         := $(shell command -v bats 2>/dev/null)
GIT          := $(shell command -v git 2>/dev/null)
```

### Version Detection

Automatic version detection from VERSION file:

```makefile
VERSION := $(shell cat VERSION 2>/dev/null || echo "0.0.0")
```

### Extension Name Detection

Automatic extension name from `.extension` file:

```makefile
EXTENSION_NAME := $(shell grep '^name:' .extension 2>/dev/null | \
                     awk '{print $2}' || echo "odb_autoupgrade")
```

## Compatibility

- **Minimum Requirements:**
  - Bash 4.0+
  - GNU Make 3.81+
  - Git 2.0+

- **Development Tools:**
  - shellcheck (optional, for linting)
  - shfmt (optional, for formatting)
  - markdownlint (optional, for doc linting)
  - bats-core (optional, for testing)

- **Operating Systems:**
  - macOS 10.15+
  - Linux (various distributions)
  - Compatible with CI environments

## Migration Guide

### From v0.2.0 to v0.3.0

**No breaking changes** - all existing functionality preserved.

**New capabilities available:**

1. Format your code:

   ```bash
   make format
   ```

2. Run pre-commit checks:

   ```bash
   make pre-commit
   ```

3. Check tool status:

   ```bash
   make tools
   ```

4. Use quick shortcuts:

   ```bash
   make t l f b c
   ```

## Dependencies

No new runtime dependencies. All development tools are optional and detected
automatically:

```bash
# macOS
brew install shellcheck shfmt bats-core markdownlint-cli

# Linux (Ubuntu/Debian)
apt-get install shellcheck shfmt bats
npm install -g markdownlint-cli
```

## Known Issues

None identified in this release.

## Future Enhancements

Planned for upcoming releases:

- Integration tests for AutoUpgrade scenarios
- Docker-based testing environment
- Enhanced Oracle patch management
- Automated compatibility testing

## Contributors

- Stefan Oehrli (oes) - <stefan.oehrli@oradba.ch>

## Related Resources

- [Development Guide](../development.md)
- [Installation Guide](../installation.md)
- [Configuration Reference](../configuration.md)
- [CHANGELOG](../../CHANGELOG.md)

## Support

For issues, questions, or contributions:

- GitHub: <https://github.com/oehrlis/odb_autoupgrade>
- Issues: <https://github.com/oehrlis/odb_autoupgrade/issues>

---

**Previous Release:** [v0.2.0](../CHANGELOG.md#020---2026-01-07)  
**Full Changelog:** <https://github.com/oehrlis/odb_autoupgrade/blob/main/CHANGELOG.md>
